<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CritterCraft Wallet</title>
    <link rel="stylesheet" href="style.css"> <!-- Assuming a style.css might be added later -->
    <!-- Add this in the <head> or before your app.js script tag -->
    <script src="https://unpkg.com/@polkadot/api@latest/bundle.js"></script>
</head>
<body>
    <h1>CritterCraft Wallet Dashboard</h1>

    <div id="connection-status">Connecting to CritterChain...</div>

    <div id="wallet-info">
        <p>Wallet Address: <span id="wallet-address">Loading...</span></p>
        <p>PTCN Balance: <span id="ptcn-balance">Loading...</span></p>
    </div>

    <div id="pet-nfts">
        <h2>My Pet NFTs</h2>
        <ul id="nft-list">
            <!-- Pet NFTs will be listed here as <li> items -->
            <p id="nft-list-placeholder">Loading Pet NFTs...</p>
        </ul>
    </div>

    <div id="actions">
        <h2>Actions</h2>
        <div id="daily-claim-section">
            <h3>Daily PTCN Claim</h3>
            <button id="claimDailyPtcnButton">Claim Daily PTCN</button>
            <p id="claim-ptcn-status"></p>
            <p>Next claim available after: <span id="next-claim-time">Calculating...</span></p>
        </div>
        <hr>
        <!-- <button id="createPetButton">Create New Pet (Mint NFT)</button> --> <!-- Replaced by section below -->
        <div id="mint-nft-section">
            <h3>Create New Pet NFT</h3>
            <label for="pet-species">Species:</label>
            <input type="text" id="pet-species" name="pet-species" value="RoboDog"><br><br>
            <label for="pet-name">Name:</label>
            <input type="text" id="pet-name" name="pet-name" value="Sparky"><br><br>
            <button id="mintNftButton">Mint Pet NFT</button>
            <p id="mint-status"></p>
        </div>
        <hr> <!-- Separator -->
        <div id="transfer-nft-section">
            <h3>Transfer Pet NFT</h3>
            <label for="recipient-address">Recipient Address:</label>
            <input type="text" id="recipient-address" name="recipient-address" placeholder="Enter recipient's address" style="width: 300px;"><br><br>
            <label for="pet-id-transfer">Pet ID to Transfer:</label>
            <input type="number" id="pet-id-transfer" name="pet-id-transfer" placeholder="Enter Pet ID"><br><br>
            <button id="transferNftButton">Transfer Pet NFT</button>
            <p id="transfer-status"></p>
        </div>
        <hr> <!-- Separator -->
        <div id="update-pet-section">
            <h3>Update Pet Details</h3>
            <label for="update-pet-id">Pet ID to Update:</label>
            <input type="number" id="update-pet-id" placeholder="Enter Pet ID"><br><br>

            <label for="update-pet-name">New Name (Optional):</label>
            <input type="text" id="update-pet-name" placeholder="Enter new name"><br><br>

            <label for="update-pet-level">New Level (Optional):</label>
            <input type="number" id="update-pet-level" placeholder="Enter new level"><br><br>

            <label for="update-pet-xp">New XP (Optional):</label>
            <input type="number" id="update-pet-xp" placeholder="Enter new XP"><br><br>

            <label for="update-pet-mood">New Mood (0-255, Optional):</label>
            <input type="number" id="update-pet-mood" placeholder="Enter new mood"><br><br>

            <label for="update-pet-hunger">New Hunger (0-255, Optional):</label>
            <input type="number" id="update-pet-hunger" placeholder="Enter new hunger"><br><br>

            <label for="update-pet-energy">New Energy (0-255, Optional):</label>
            <input type="number" id="update-pet-energy" placeholder="Enter new energy"><br><br>

            <label for="update-pet-personality">Personality Traits (comma-separated, Optional):</label>
            <input type="text" id="update-pet-personality" placeholder="e.g., Brave,Curious,Shy"><br><br>

            <button id="updatePetButton">Update Pet Details</button>
            <p id="update-pet-status"></p>
        </div>
        <!-- More actions like send PTCN, etc. can be added here -->
    </div>

    <div id="events-section">
        <h3>Recent Activity</h3>
        <ul id="event-list">
            <p id="event-list-placeholder">No recent activity or loading events...</p>
            <!-- Events will be listed here as <li> items -->
        </ul>
    </div>

    <hr>
    <h2>Marketplace</h2>
    <div id="marketplace-section">
        <h3>Listed NFTs for Sale</h3>
        <ul id="marketplace-nft-list">
            <p id="marketplace-list-placeholder">Loading marketplace listings...</p>
            <!-- Listed NFTs will be dynamically added here -->
        </ul>
        <hr>
        <h3>List Your NFT for Sale</h3>
        <div id="list-nft-form">
            <label for="list-pet-id">Pet ID to List:</label>
            <input type="number" id="list-pet-id" placeholder="Enter ID of your Pet"><br><br>
            <label for="list-price">Price (in PTCN units):</label>
            <input type="number" id="list-price" placeholder="Enter price"><br><br>
            <button id="listNftButton">List My NFT</button>
            <p id="list-nft-status"></p>
        </div>
        <hr>
        <h3>Unlist Your NFT</h3>
        <div id="unlist-nft-form">
            <label for="unlist-pet-id">Pet ID to Unlist:</label>
            <input type="number" id="unlist-pet-id" placeholder="Enter ID of your listed Pet"><br><br>
            <button id="unlistNftButton">Unlist My NFT</button>
            <p id="unlist-nft-status"></p>
        </div>
    </div>

    <hr>
    <h2>Battle Arena</h2>
    <div id="battle-arena-section">
        <h3>Register Your Pet for Battle</h3>
        <div id="register-battle-form">
            <label for="battle-pet-id-select">Select Your Pet:</label>
            <select id="battle-pet-id-select">
                <option value="">--Loading your pets--</option>
            </select><br><br>
            <button id="registerBattleButton">Register for Battle</button>
            <p id="register-battle-status"></p>
        </div>
        <hr>
        <h3>Current Battles</h3>
        <ul id="battle-list">
            <p id="battle-list-placeholder">Loading battle information...</p>
            <!-- Battles will be dynamically added here -->
        </ul>
    </div>

    <hr>
    <h2>Quests</h2>
    <div id="quests-section">
        <h3>Available Quests</h3>
        <ul id="available-quests-list">
            <p id="available-quests-placeholder">Loading available quests...</p>
            <!-- Available quests will be dynamically added here -->
        </ul>
        <hr>
        <h3>Completed Quests</h3>
        <ul id="completed-quests-list">
            <p id="completed-quests-placeholder">Loading completed quests...</p>
            <!-- Completed quests will be dynamically added here -->
        </ul>
        <p id="quest-action-status"></p> <!-- For feedback on complete_quest action -->
    </div>

    <hr>
    <h2>Governance</h2>
    <div id="governance-section">
        <p>The CritterCraft on-chain governance system is currently under development. Our goal is to empower PTCN token holders to shape the future of the ecosystem.
        Refer to <a href="../../GOVERNANCE.md" target="_blank">GOVERNANCE.md</a> for full details.</p>

        <h4>Planned Governance Features:</h4>
        <ul>
            <li>
                <strong>Public Referenda (via `pallet-democracy`):</strong>
                All PTCN holders will be able to propose and vote on referenda for key decisions.
                This includes voting with PTCN, potentially with conviction voting options to give more weight to long-term holders.
            </li>
            <li>
                <strong>CritterCraft Council (via `pallet-collective` & elections):</strong>
                An elected council will help guide the ecosystem, propose referenda, potentially fast-track urgent proposals, or act as a technical committee.
                Council members will be elected by PTCN holders.
            </li>
            <li>
                <strong>On-Chain Treasury (via `pallet-treasury`):</strong>
                A portion of network fees or other revenue streams may be directed to an on-chain treasury.
                Proposals to spend treasury funds (e.g., for development grants, community initiatives, marketing) will be submitted and voted upon via the governance system (typically by the Council or through public referenda).
            </li>
        </ul>
        <p><strong>Current Status:</strong> Foundational work in progress. Interactive governance features will be rolled out in future updates.</p>
        <p>Your participation will be crucial for a truly decentralized CritterCraft!</p>
    </div>

    <hr>
    <h2>Network Participation (Staking)</h2>
    <div id="staking-section">
        <h3>Your Staking Status</h3>
        <div id="my-staking-info">
            <p>Current Era: <span id="current-era-info">Loading...</span> | Next Era In: <span id="next-era-eta">Calculating...</span></p>
            <p>My Nominations: <span id="my-nominations">Loading...</span> <button id="changeNominationsButton" disabled>Change Nominations</button></p>
            <p>Total Staked: <span id="my-staked-amount">Loading...</span></p>
            <p>Claimable Rewards: <span id="claimable-rewards">N/A (Use validator payout)</span> <button id="claimRewardsButton" disabled>Claim Payouts</button></p>
            <p><em>Note: Rewards are typically paid out by validators or automated processes each era. Ensure your nominated validators are active and paying out.</em></p>
        </div>
        <hr>
        <div id="unbonding-info">
            <h4>Manage Stake & Unbonding</h4>
            <p>Bonding Duration: <span id="bonding-duration-info">~X Eras (Y Days)</span> </p>
            <label for="unbond-amount">Amount to Unbond:</label>
            <input type="number" id="unbond-amount" placeholder="Amount in PTCN">
            <button id="unbondButton">Start Unbonding</button>
            <br><br>
            <h5>Unbonding PTCN:</h5>
            <ul id="unbonding-chunks-list">
                <p id="unbonding-chunks-placeholder">No PTCN currently unbonding.</p>
            </ul>
            <button id="withdrawUnbondedButton" disabled>Withdraw Unbonded PTCN</button>
            <p id="unbond-status"></p>
            <p><em>Slashing Warning: Staked PTCN can be slashed if your nominated validators misbehave. Choose your validators carefully.</em></p>
        </div>
        <hr>
        <h3>Available Validators</h3>
        <ul id="validator-list">
            <p id="validator-list-placeholder">Loading validator information...</p>
            <!-- Validators will be dynamically added here -->
        </ul>
        <p id="staking-action-status"></p> <!-- For feedback on staking actions -->
    </div>

    <hr>
    <div id="network-info-section">
        <h3>Network Architecture & Future</h3>
        <p>CritterChain is designed with future scalability in mind. (See <a href="../../SCALABILITY_PLAN.md" target="_blank">SCALABILITY_PLAN.md</a> for details on our parachain and sharding strategy).</p>
        <p>Future interoperability with other blockchains is planned. (See <a href="../../INTEROPERABILITY.md" target="_blank">INTEROPERABILITY.md</a> for details on XCM and bridging).</p>
    </div>

    <hr>
    <h2>Bridge Assets</h2>
    <div id="bridge-section">
        <p>Cross-chain asset bridging is planned for future updates, allowing you to move PTCN and Pet NFTs to other networks.</p>
        <p><strong>Status:</strong> Coming Soon!</p>
    </div>

    <hr>
    <h2>Coming Soon: Advanced Features!</h2>
    <p><em>(Refer to ADVANCED_FEATURES.md in the project root for more conceptual details.)</em></p>
    <br>

    <div id="user-shops-placeholder-section">
        <h3>User Shops</h3>
        <p>Create your own shop and trade with other players! (Coming in a future update)</p>
    </div>
    <br>

    <div id="advanced-jobs-placeholder-section">
        <h3>Advanced Blockchain Jobs</h3>
        <p>Take on new roles and contribute to the ecosystem for greater rewards! (Coming in a future update)</p>
    </div>
    <br>

    <div id="treasure-hunts-placeholder-section">
        <h3>Treasure Hunts & Exploration</h3>
        <p>Embark on exciting adventures and discover rare rewards! (Coming in a future update)</p>
    </div>
    <br>

    <div id="minigames-placeholder-section">
        <h3>Arcade & Mini-Games</h3>
        <p>Play fun mini-games and compete for prizes! (Coming in a future update)</p>
    </div>

    <script src="app.js"></script>
</body>
</html>
